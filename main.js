!function(){"use strict";class e{constructor(e,t){let{cardData:s,userId:r,handleCardClick:o,handleDeleteClick:i,handleLikeClick:n}=e;this._name=s.name,this._link=s.link,this._id=s._id,this._likes=s._likes,this._isLiked=s.isLiked,this._userId=r,this._userCardId=s.owner._id,this._cardSelector=t,this._handleCardClick=o,this._handleDeleteClick=i,this._handleLikeClick=n}_getTemplate(){return this._cardSelector.cloneNode(!0)}_renderLikes(){this._isLiked?(this._imageLike.classList.add("card__like-button_active"),console.log("whyamhere1"),console.log(this._isLiked),console.log(this._imageLike)):(this._imageLike.classList.remove("card__like-button_active"),console.log("whyamhere2"))}getCardView(){this._element=this._getTemplate(),this._setEventListenersCard();const e=this._element.querySelector(".card__image"),t=this._element.querySelector(".card__title");return this._imageLike=this._element.querySelector(".card__like-button"),e.src=this._link,e.alt=`Photo of ${this._name}`,t.textContent=this._name,console.log(this._id),console.log(this._likes),this._renderLikes(),this._element}updateLikeStatus(e){this._isLiked=e,this._renderLikes()}_setEventListenersCard(){this._element.querySelector(".card__image").addEventListener("click",(()=>this._handleCardClick({name:this._name,link:this._link}))),this._element.querySelector(".card__trash-button").addEventListener("click",(()=>this._handleDeleteClick(this))),this._element.querySelector(".card__like-button").addEventListener("click",(()=>this._handleLikeClick(this)))}getId(){return this._id}removeCard(){this._element.remove()}}class t{constructor(e,t){this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._form=t}_hasInvalidInput(){return!this._inputEls.every((e=>e.validity.valid))}_checkInputValidity(e){e.validity.valid?this._hideInputError(e):this._showInputError(e)}_hideInputError(e){console.log("reached here3");const t=this._form.querySelector(`#${e.id}-error`);e.classList.remove(this._inputErrorClass),t.textContent=" ",t.classList.remove(this._errorClass)}_showInputError(e){console.log("reached here2");const t=this._form.querySelector(`#${e.id}-error`);e.classList.add(this._inputErrorClass),t.textContent=e.validationMessage,t.classList.add(this._errorClass)}toggleButtonState(){this._hasInvalidInput(this._inputEls)?(this._submitButton.classList.add(this._inactiveButtonClass),this._submitButton.disabled=!0):(this._submitButton.classList.remove(this._inactiveButtonClass),this._submitButton.disabled=!1)}_setEventListeners(){this._inputEls=[...this._form.querySelectorAll(this._inputSelector)],this._submitButton=this._form.querySelector(this._submitButtonSelector),this.toggleButtonState(),this._inputEls.forEach((e=>{e.addEventListener("input",(()=>{this._checkInputValidity(e),this.toggleButtonState()}))}))}enableValidation(){this._form.addEventListener("submit",(e=>{e.preventDefault()})),this._setEventListeners()}}class s{constructor(e){let{popupSelector:t}=e;this._popupElement=t,this._handleEscClose=this._handleEscClose.bind(this)}open(){this._popupElement.classList.add("modal_opened"),document.addEventListener("keydown",this._handleEscClose)}close(){this._popupElement.classList.remove("modal_opened"),document.removeEventListener("keydown",this._handleEscClose)}_handleEscClose=e=>{"Escape"===e.key&&this.close()};setEventListeners(){this._popupElement.addEventListener("mousedown",(e=>{(e.target===e.currentTarget||e.target.classList.contains("modal__close"))&&this.close()}))}}class r extends s{constructor(e,t){super({popupSelector:e}),this._popupForm=this._popupElement.querySelector(".modal__form"),this._formInputs=this._popupForm.querySelectorAll(".modal__input"),this._handleFormSubmit=t}_getInputValues(){const e={};return this._formInputs.forEach((t=>{e[t.name]=t.value})),e}_submitForm=e=>{e.preventDefault(),this._handleFormSubmit(this._getInputValues())};setEventListeners(){console.log("helper6"),this._popupForm.addEventListener("submit",this._submitForm),super.setEventListeners()}close(){this._popupForm.reset(),super.close()}}const o=document.querySelector("#profile-edit-button"),i=document.querySelector("#profile-edit-modal"),n=document.querySelector("#preview-image-modal"),l=document.querySelector("#add-card-modal"),a=document.querySelector("#edit-avatar-modal"),c=document.querySelector("#popup-confirm-modal"),h=(i.querySelector("#profile-modal-close"),l.querySelector("#profile-add-close"),n.querySelector("#modal-preview-close"),document.querySelector(".profile__add-button")),d=document.querySelector(".profile__image"),_=document.querySelector(".profile__title"),u=document.querySelector(".profile__description"),p=document.querySelector("#profile-title-input"),m=document.querySelector("#profile-description-input"),v=(n.querySelector(".modal__footer"),a.querySelector("#edit-avatar-form")),f=i.querySelector("#edit-profile-form"),g=l.querySelector("#add-card-form"),k=document.querySelector("#card-template").content.firstElementChild,S=document.querySelector(".gallery__list"),E=(g.querySelector("#modal__input_type_title"),g.querySelector("#modal__input_type_url"),{inputSelector:".modal__input",submitButtonSelector:".modal__button",inactiveButtonClass:"modal__button_disabled",inputErrorClass:".modal__input_type_error",errorClass:".modal__error"}),C=new class{constructor(e){let{baseUrl:t,headers:s}=e;this._baseUrl=t,this._headers=s}_checkResponse(e){return e.ok?(console.log(e),e.json()):Promise.reject(`Error ${e.status}`)}getUserInfo(){return fetch(`${this._baseUrl}/users/me`,{method:"GET",headers:this._headers}).then(this._checkResponse)}getInitialCards(){return fetch(`${this._baseUrl}/cards`,{method:"GET",headers:this._headers}).then(this._checkResponse)}getAppInfo(){return Promise.all([this.getInitialCards(),this.getUserInfo()])}patchProfileData(e){let{name:t,description:s}=e;return fetch(`${this._baseUrl}/users/me`,{method:"PATCH",headers:this._headers,body:JSON.stringify({name:t,about:s})}).then(this._checkResponse)}addNewCard(e){let{name:t,link:s}=e;return fetch(`${this._baseUrl}/cards`,{method:"POST",headers:this._headers,body:JSON.stringify({name:t,link:s})}).then(this._checkResponse)}deleteCard(e){return console.log("help2"),fetch(`${this._baseUrl}/cards/${e}`,{method:"DELETE",headers:this._headers}).then(this._checkResponse)}addCardLike(e){return fetch(`${this._baseUrl}/cards/${e}/likes`,{method:"PUT",headers:this._headers}).then(this._checkResponse)}removeCardLike(e){return fetch(`${this._baseUrl}/cards/${e}/likes`,{method:"DELETE",headers:this._headers}).then(this._checkResponse)}patchProfileImage(e){return fetch(`${this._baseUrl}/users/me/avatar`,{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:e})}).then(this._checkResponse)}}({baseUrl:"https://around-api.en.tripleten-services.com/v1",headers:{authorization:"58a7c735-ac44-49af-aeeb-e746dacd4b77","Content-Type":"application/json"}}),L=new class extends s{constructor(e){super({popupSelector:e}),this._popupForm=this._popupElement.querySelector("#popup-confirm-form"),this._submitButton=this._popupElement.querySelector(".modal__button")}setSubmitAction(e){console.log("helpser4"),this._handleFormSubmit=e}_handleSubmit=e=>{e.preventDefault(),this._handleFormSubmit()};setEventListeners(){console.log("helper5"),super.setEventListeners(),this._popupForm.addEventListener("submit",(e=>{e.preventDefault(),console.log("helper7"),this._handleFormSubmit()}))}}(c);L.setEventListeners();const y=new class{constructor(e,t,s){this._profileTitle=e,this._profileDescription=t,this._profileImage=s,console.log(this._profileImage)}getUserInfo(){const e={};return console.log(this._profileTitle),e.profileTitle=this._profileTitle.textContent,e.profileDescription=this._profileDescription.textContent,e}setUserInfo(e){this._profileTitle.textContent=e.name,this._profileDescription.textContent=e.about}setAvatar(e){console.log(e),this._profileImage.src=e}}(_,u,d);console.log(y);const b=t=>{const s=new e({cardData:t,userId:B,handleCardClick:e=>{P.open(e)},handleDeleteClick:I,handleLikeClick:q},k);w.addItem(s.getCardView())};function I(e){L.open(),L.setSubmitAction((()=>{C.deleteCard(e.getId()).then((()=>{e.removeCard(),L.close()})).catch((e=>{console.error(e)}))}))}function q(e){e._isLiked?C.removeCardLike(e._id).then((()=>{e.updateLikeStatus(!1)})).catch((e=>{console.error(e)})):C.addCardLike(e._id).then((()=>{e.updateLikeStatus(!0)})).catch((e=>{console.error(e)}))}const w=new class{constructor(e,t){let{renderer:s}=e;this._container=t,this._renderer=s}renderItems(e){e.forEach((e=>{this._renderer(e)}))}addItem(e){this._container.prepend(e)}}({renderer:b},S);let B="";C.getAppInfo().then((e=>{let[t,s]=e;B=s._id,w.renderItems(t),y.setUserInfo(s),console.log(s)})),console.log(d);const D=new t(E,f),U=new t(E,v),T=new t(E,g);D.enableValidation(),T.enableValidation(),U.enableValidation(),console.log(i);const $=new r(l,(e=>{C.addNewCard(e).then((e=>{b(e),$.close()})).catch((e=>{console.log(e)}))})),F=new r(i,(e=>{console.log(e),C.patchProfileData(e).then((e=>{y.setUserInfo(e),F.close()})).catch((e=>{console.log(e)}))}));console.log(c);const x=new r(a,(e=>{C.patchProfileImage(e.link).then((e=>{console.log(e.avatar),y.setAvatar(e.avatar),x.close()})).catch((e=>{console.log(e)}))}));F.setEventListeners(),$.setEventListeners(),x.setEventListeners();const P=new class extends s{constructor(e){super({popupSelector:e}),this._previewImage=this._popupElement.querySelector(".modal__image"),console.log(this._previewImage),this._previewCaption=this._popupElement.querySelector(".modal__footer")}open(e){const{link:t,name:s}=e;this._previewImage.src=t,this._previewImage.alt=s,this._previewCaption.textContent=s,super.open()}setEventListeners(){super.setEventListeners()}}(n);P.setEventListeners(),d.addEventListener("click",(()=>{x.open()})),o.addEventListener("click",(()=>{const{profileTitle:e,profileDescription:t}=y.getUserInfo();p.value=e,m.value=t,F.open()})),h.addEventListener("click",(()=>{$.open(),T.toggleButtonState()}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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dUUsRUFBYTFGLG9CQU1id0IsRUFBbUJ4RSxpQkFBaUIsU0FBUyxLQUMzQ2dLLEVBQWdCckgsTUFBTSxJQUd4QnNCLEVBQWtCakUsaUJBQWlCLFNBQVMsS0FDMUMsTUFBTSxhQUFFeUUsRUFBWSxtQkFBRUMsR0FBdUJtRCxFQUFLNUIsY0FDbER0QixFQUFrQmQsTUFBUVksRUFDMUJHLEVBQXdCZixNQUFRYSxFQUNoQ3FGLEVBQWNwSCxNQUFNLElBSXRCNEIsRUFBaUJ2RSxpQkFBaUIsU0FBUyxLQUN6QzZKLEVBQWlCbEgsT0FDakJpSCxFQUFpQi9ILG1CQUFtQixHIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL3V0aWxzL2NvbnN0YW50cy5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvcGFnZXMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvQXBpLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1BvcHVwQ29uZmlybS5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Vc2VySW5mby5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9TZWN0aW9uLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IGNsYXNzIENhcmQge1xyXG4gIGNvbnN0cnVjdG9yKFxyXG4gICAgeyBjYXJkRGF0YSwgdXNlcklkLCBoYW5kbGVDYXJkQ2xpY2ssIGhhbmRsZURlbGV0ZUNsaWNrLCBoYW5kbGVMaWtlQ2xpY2sgfSxcclxuICAgIGNhcmRTZWxlY3RvclxyXG4gICkge1xyXG4gICAgdGhpcy5fbmFtZSA9IGNhcmREYXRhLm5hbWU7XHJcbiAgICB0aGlzLl9saW5rID0gY2FyZERhdGEubGluaztcclxuICAgIHRoaXMuX2lkID0gY2FyZERhdGEuX2lkO1xyXG4gICAgdGhpcy5fbGlrZXMgPSBjYXJkRGF0YS5fbGlrZXM7XHJcbiAgICB0aGlzLl9pc0xpa2VkID0gY2FyZERhdGEuaXNMaWtlZDtcclxuICAgIHRoaXMuX3VzZXJJZCA9IHVzZXJJZDtcclxuICAgIHRoaXMuX3VzZXJDYXJkSWQgPSBjYXJkRGF0YVtcIm93bmVyXCJdLl9pZDtcclxuICAgIHRoaXMuX2NhcmRTZWxlY3RvciA9IGNhcmRTZWxlY3RvcjtcclxuICAgIHRoaXMuX2hhbmRsZUNhcmRDbGljayA9IGhhbmRsZUNhcmRDbGljaztcclxuICAgIHRoaXMuX2hhbmRsZURlbGV0ZUNsaWNrID0gaGFuZGxlRGVsZXRlQ2xpY2s7XHJcbiAgICB0aGlzLl9oYW5kbGVMaWtlQ2xpY2sgPSBoYW5kbGVMaWtlQ2xpY2s7XHJcbiAgfVxyXG5cclxuICBfZ2V0VGVtcGxhdGUoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5fY2FyZFNlbGVjdG9yLmNsb25lTm9kZSh0cnVlKTtcclxuICB9XHJcblxyXG4gIF9yZW5kZXJMaWtlcygpIHtcclxuICAgIGlmICh0aGlzLl9pc0xpa2VkKSB7XHJcbiAgICAgIHRoaXMuX2ltYWdlTGlrZS5jbGFzc0xpc3QuYWRkKFwiY2FyZF9fbGlrZS1idXR0b25fYWN0aXZlXCIpO1xyXG4gICAgICBjb25zb2xlLmxvZyhcIndoeWFtaGVyZTFcIik7XHJcbiAgICAgIGNvbnNvbGUubG9nKHRoaXMuX2lzTGlrZWQpO1xyXG4gICAgICBjb25zb2xlLmxvZyh0aGlzLl9pbWFnZUxpa2UpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5faW1hZ2VMaWtlLmNsYXNzTGlzdC5yZW1vdmUoXCJjYXJkX19saWtlLWJ1dHRvbl9hY3RpdmVcIik7XHJcbiAgICAgIGNvbnNvbGUubG9nKFwid2h5YW1oZXJlMlwiKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGdldENhcmRWaWV3KCkge1xyXG4gICAgdGhpcy5fZWxlbWVudCA9IHRoaXMuX2dldFRlbXBsYXRlKCk7XHJcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVyc0NhcmQoKTtcclxuICAgIGNvbnN0IGltYWdlRWxlbWVudCA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19pbWFnZVwiKTtcclxuICAgIGNvbnN0IGltYWdlVGl0bGUgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fdGl0bGVcIik7XHJcbiAgICB0aGlzLl9pbWFnZUxpa2UgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fbGlrZS1idXR0b25cIik7XHJcbiAgICBpbWFnZUVsZW1lbnQuc3JjID0gdGhpcy5fbGluaztcclxuICAgIGltYWdlRWxlbWVudC5hbHQgPSBgUGhvdG8gb2YgJHt0aGlzLl9uYW1lfWA7XHJcbiAgICBpbWFnZVRpdGxlLnRleHRDb250ZW50ID0gdGhpcy5fbmFtZTtcclxuXHJcbiAgICBjb25zb2xlLmxvZyh0aGlzLl9pZCk7XHJcbiAgICBjb25zb2xlLmxvZyh0aGlzLl9saWtlcyk7XHJcblxyXG4gICAgdGhpcy5fcmVuZGVyTGlrZXMoKTtcclxuXHJcbiAgICByZXR1cm4gdGhpcy5fZWxlbWVudDtcclxuICB9XHJcblxyXG4gIHVwZGF0ZUxpa2VTdGF0dXMoaXNMaWtlZCkge1xyXG4gICAgdGhpcy5faXNMaWtlZCA9IGlzTGlrZWQ7XHJcbiAgICB0aGlzLl9yZW5kZXJMaWtlcygpO1xyXG4gIH1cclxuXHJcbiAgX3NldEV2ZW50TGlzdGVuZXJzQ2FyZCgpIHtcclxuICAgIHRoaXMuX2VsZW1lbnRcclxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9faW1hZ2VcIilcclxuICAgICAgLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PlxyXG4gICAgICAgIHRoaXMuX2hhbmRsZUNhcmRDbGljayh7IG5hbWU6IHRoaXMuX25hbWUsIGxpbms6IHRoaXMuX2xpbmsgfSlcclxuICAgICAgKTtcclxuXHJcbiAgICB0aGlzLl9lbGVtZW50XHJcbiAgICAgIC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX3RyYXNoLWJ1dHRvblwiKVxyXG4gICAgICAuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHRoaXMuX2hhbmRsZURlbGV0ZUNsaWNrKHRoaXMpKTtcclxuXHJcbiAgICB0aGlzLl9lbGVtZW50XHJcbiAgICAgIC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2xpa2UtYnV0dG9uXCIpXHJcbiAgICAgIC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4gdGhpcy5faGFuZGxlTGlrZUNsaWNrKHRoaXMpKTtcclxuICB9XHJcblxyXG4gIGdldElkKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX2lkO1xyXG4gIH1cclxuXHJcbiAgcmVtb3ZlQ2FyZCgpIHtcclxuICAgIHRoaXMuX2VsZW1lbnQucmVtb3ZlKCk7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEZvcm1WYWxpZGF0b3Ige1xyXG4gIGNvbnN0cnVjdG9yKHNldHRpbmdzLCBmb3JtRWxlbWVudCkge1xyXG4gICAgdGhpcy5faW5wdXRTZWxlY3RvciA9IHNldHRpbmdzLmlucHV0U2VsZWN0b3I7XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3RvciA9IHNldHRpbmdzLnN1Ym1pdEJ1dHRvblNlbGVjdG9yO1xyXG4gICAgdGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyA9IHNldHRpbmdzLmluYWN0aXZlQnV0dG9uQ2xhc3M7XHJcbiAgICB0aGlzLl9pbnB1dEVycm9yQ2xhc3MgPSBzZXR0aW5ncy5pbnB1dEVycm9yQ2xhc3M7XHJcbiAgICB0aGlzLl9lcnJvckNsYXNzID0gc2V0dGluZ3MuZXJyb3JDbGFzcztcclxuICAgIHRoaXMuX2Zvcm0gPSBmb3JtRWxlbWVudDtcclxuICB9XHJcblxyXG4gIF9oYXNJbnZhbGlkSW5wdXQoKSB7XHJcbiAgICByZXR1cm4gIXRoaXMuX2lucHV0RWxzLmV2ZXJ5KChpbnB1dEVsKSA9PiBpbnB1dEVsLnZhbGlkaXR5LnZhbGlkKTtcclxuICB9XHJcblxyXG4gIF9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbCkge1xyXG4gICAgaWYgKCFpbnB1dEVsLnZhbGlkaXR5LnZhbGlkKSB7XHJcbiAgICAgIHRoaXMuX3Nob3dJbnB1dEVycm9yKGlucHV0RWwpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBfaGlkZUlucHV0RXJyb3IoaW5wdXRFbCkge1xyXG4gICAgY29uc29sZS5sb2coXCJyZWFjaGVkIGhlcmUzXCIpO1xyXG4gICAgY29uc3QgZXJyb3JNZXNzYWdlRWwgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoYCMke2lucHV0RWwuaWR9LWVycm9yYCk7XHJcbiAgICBpbnB1dEVsLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcclxuICAgIGVycm9yTWVzc2FnZUVsLnRleHRDb250ZW50ID0gXCIgXCI7XHJcbiAgICBlcnJvck1lc3NhZ2VFbC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2Vycm9yQ2xhc3MpO1xyXG4gIH1cclxuXHJcbiAgX3Nob3dJbnB1dEVycm9yKGlucHV0RWwpIHtcclxuICAgIGNvbnNvbGUubG9nKFwicmVhY2hlZCBoZXJlMlwiKTtcclxuICAgIGNvbnN0IGVycm9yTWVzc2FnZUVsID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKGAjJHtpbnB1dEVsLmlkfS1lcnJvcmApO1xyXG4gICAgaW5wdXRFbC5jbGFzc0xpc3QuYWRkKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XHJcbiAgICBlcnJvck1lc3NhZ2VFbC50ZXh0Q29udGVudCA9IGlucHV0RWwudmFsaWRhdGlvbk1lc3NhZ2U7XHJcbiAgICBlcnJvck1lc3NhZ2VFbC5jbGFzc0xpc3QuYWRkKHRoaXMuX2Vycm9yQ2xhc3MpO1xyXG4gIH1cclxuXHJcbiAgdG9nZ2xlQnV0dG9uU3RhdGUoKSB7XHJcbiAgICBpZiAodGhpcy5faGFzSW52YWxpZElucHV0KHRoaXMuX2lucHV0RWxzKSkge1xyXG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24uY2xhc3NMaXN0LmFkZCh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLmRpc2FibGVkID0gdHJ1ZTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24uZGlzYWJsZWQgPSBmYWxzZTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX2lucHV0RWxzID0gWy4uLnRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvckFsbCh0aGlzLl9pbnB1dFNlbGVjdG9yKV07XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24gPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IodGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IpO1xyXG4gICAgdGhpcy50b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG4gICAgdGhpcy5faW5wdXRFbHMuZm9yRWFjaCgoaW5wdXRFbCkgPT4ge1xyXG4gICAgICBpbnB1dEVsLmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5fY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWwpO1xyXG4gICAgICAgIHRoaXMudG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGVuYWJsZVZhbGlkYXRpb24oKSB7XHJcbiAgICB0aGlzLl9mb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGV2dCkgPT4ge1xyXG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgIH0pO1xyXG5cclxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcih7IHBvcHVwU2VsZWN0b3IgfSkge1xyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50ID0gcG9wdXBTZWxlY3RvcjtcclxuICAgIHRoaXMuX2hhbmRsZUVzY0Nsb3NlID0gdGhpcy5faGFuZGxlRXNjQ2xvc2UuYmluZCh0aGlzKTtcclxuICAgIC8vdGhpcy5fY2xvc2VCdXR0b24gPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fY2xvc2VcIik7XHJcbiAgfVxyXG5cclxuICBvcGVuKCkge1xyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJtb2RhbF9vcGVuZWRcIik7XHJcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XHJcbiAgfVxyXG5cclxuICBjbG9zZSgpIHtcclxuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwibW9kYWxfb3BlbmVkXCIpO1xyXG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xyXG4gIH1cclxuXHJcbiAgX2hhbmRsZUVzY0Nsb3NlID0gKGV2dCkgPT4ge1xyXG4gICAgaWYgKGV2dC5rZXkgPT09IFwiRXNjYXBlXCIpIHtcclxuICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgKGV2dCkgPT4ge1xyXG4gICAgICBpZiAoXHJcbiAgICAgICAgZXZ0LnRhcmdldCA9PT0gZXZ0LmN1cnJlbnRUYXJnZXQgfHxcclxuICAgICAgICBldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcIm1vZGFsX19jbG9zZVwiKVxyXG4gICAgICApIHtcclxuICAgICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3RvciwgaGFuZGxlRm9ybVN1Ym1pdCkge1xyXG4gICAgc3VwZXIoeyBwb3B1cFNlbGVjdG9yIH0pO1xyXG4gICAgdGhpcy5fcG9wdXBGb3JtID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Zvcm1cIik7XHJcbiAgICB0aGlzLl9mb3JtSW5wdXRzID0gdGhpcy5fcG9wdXBGb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoXCIubW9kYWxfX2lucHV0XCIpO1xyXG4gICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCA9IGhhbmRsZUZvcm1TdWJtaXQ7XHJcbiAgfVxyXG5cclxuICBfZ2V0SW5wdXRWYWx1ZXMoKSB7XHJcbiAgICBjb25zdCB2YWx1ZXMgPSB7fTtcclxuICAgIHRoaXMuX2Zvcm1JbnB1dHMuZm9yRWFjaCgoaW5wdXQpID0+IHtcclxuICAgICAgdmFsdWVzW2lucHV0Lm5hbWVdID0gaW5wdXQudmFsdWU7XHJcbiAgICB9KTtcclxuICAgIHJldHVybiB2YWx1ZXM7XHJcbiAgfVxyXG5cclxuICBfc3VibWl0Rm9ybSA9IChlKSA9PiB7XHJcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0KHRoaXMuX2dldElucHV0VmFsdWVzKCkpO1xyXG4gIH07XHJcblxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgY29uc29sZS5sb2coXCJoZWxwZXI2XCIpO1xyXG4gICAgdGhpcy5fcG9wdXBGb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgdGhpcy5fc3VibWl0Rm9ybSk7XHJcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xyXG4gIH1cclxuXHJcbiAgY2xvc2UoKSB7XHJcbiAgICB0aGlzLl9wb3B1cEZvcm0ucmVzZXQoKTtcclxuICAgIHN1cGVyLmNsb3NlKCk7XHJcbiAgfVxyXG59XHJcbiIsImNvbnN0IGluaXRpYWxDYXJkcyA9IFtcclxuICB7XHJcbiAgICBuYW1lOiBcIkJveGVkIFdhdGVyIElzIEJldHRlclwiLFxyXG4gICAgbGluazogXCJodHRwczovL2ltYWdlcy51bnNwbGFzaC5jb20vcGhvdG8tMTU3MDY1NDYyMTg1Mi05ZGQyNWI3NmIzOGQ/aXhsaWI9cmItNC4wLjMmaXhpZD1Nbnd4TWpBM2ZERjhNSHh3YUc5MGJ5MXdZV2RsZkh4OGZHVnVmREI4Zkh4OCZhdXRvPWZvcm1hdCZmaXQ9Y3JvcCZ3PTY4NyZxPTgwXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIkFuZHJlYSBEZSBTYW50aXNcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9pbWFnZXMudW5zcGxhc2guY29tL3Bob3RvLTE2ODIyODI0NjI1MjMtOTk2YWZhOTM3MDhiP2l4bGliPXJiLTQuMC4zJml4aWQ9TW53eE1qQTNmREI4TUh4d2FHOTBieTF3WVdkbGZIeDhmR1Z1ZkRCOGZIeDgmYXV0bz1mb3JtYXQmZml0PWNyb3Amdz0xODg3JnE9ODBcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiSm9zaCBIaWxkXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vaW1hZ2VzLnVuc3BsYXNoLmNvbS9waG90by0xNjgxOTU4NzU3NDA1LTkyNjQ5NDM1ODc1Mz9peGxpYj1yYi00LjAuMyZpeGlkPU1ud3hNakEzZkRCOE1IeHdhRzkwYnkxd1lXZGxmSHg4ZkdWdWZEQjhmSHg4JmF1dG89Zm9ybWF0JmZpdD1jcm9wJnc9MTE2OSZxPTgwXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIkJ1ZGFwZXN0LCBIb25ncmllXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vaW1hZ2VzLnVuc3BsYXNoLmNvbS9waG90by0xNTQ5ODc3NDUyLTljMzg3OTU0ZmJjMj9peGxpYj1yYi00LjAuMyZpeGlkPU1ud3hNakEzZkRCOE1IeHdhRzkwYnkxd1lXZGxmSHg4ZkdWdWZEQjhmSHg4JmF1dG89Zm9ybWF0JmZpdD1jcm9wJnc9MTE3MCZxPTgwXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIk11bWJpYSwgSW5kaWFcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9wbHVzLnVuc3BsYXNoLmNvbS9wcmVtaXVtX3Bob3RvLTE2NzQ4OTg1MjA4MjgtODdmYmI5Y2M0MjhlP2l4bGliPXJiLTQuMC4zJml4aWQ9TW53eE1qQTNmREI4TUh4d2FHOTBieTF3WVdkbGZIeDhmR1Z1ZkRCOGZIeDgmYXV0bz1mb3JtYXQmZml0PWNyb3Amdz0xMTcwJnE9ODBcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiTGEgUGV0aXRlIENlaW50dXJlXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vaW1hZ2VzLnVuc3BsYXNoLmNvbS9waG90by0xNTU2OTA1MjAwLTI3OTU2NTUxM2EyZD9peGxpYj1yYi00LjAuMyZpeGlkPU1ud3hNakEzZkRCOE1IeHdhRzkwYnkxd1lXZGxmSHg4ZkdWdWZEQjhmSHg4JmF1dG89Zm9ybWF0JmZpdD1jcm9wJnc9MTE3MCZxPTgwXCIsXHJcbiAgfSxcclxuXTtcclxuXHJcbmNvbnN0IHByb2ZpbGVFZGl0QnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLWVkaXQtYnV0dG9uXCIpO1xyXG5jb25zdCBwcm9maWxlRWRpdE1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLWVkaXQtbW9kYWxcIik7XHJcbmNvbnN0IHByZXZpZXdJbWFnZU1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcmV2aWV3LWltYWdlLW1vZGFsXCIpO1xyXG5jb25zdCBhZGRDYXJkTW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2FkZC1jYXJkLW1vZGFsXCIpO1xyXG5jb25zdCBlZGl0QXZhdGFyTW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2VkaXQtYXZhdGFyLW1vZGFsXCIpO1xyXG5jb25zdCBwb3B1cENvbmZpcm1Nb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcG9wdXAtY29uZmlybS1tb2RhbFwiKTtcclxuY29uc3QgcHJvZmlsZU1vZGFsQ2xvc2VCdXR0b24gPSBwcm9maWxlRWRpdE1vZGFsLnF1ZXJ5U2VsZWN0b3IoXHJcbiAgXCIjcHJvZmlsZS1tb2RhbC1jbG9zZVwiXHJcbik7XHJcbmNvbnN0IGFkZENhcmRNb2RhbENsb3NlQnV0dG9uID1cclxuICBhZGRDYXJkTW9kYWwucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLWFkZC1jbG9zZVwiKTtcclxuY29uc3QgcHJldmlld0ltYWdlQ2xvc2VCdXR0b24gPSBwcmV2aWV3SW1hZ2VNb2RhbC5xdWVyeVNlbGVjdG9yKFxyXG4gIFwiI21vZGFsLXByZXZpZXctY2xvc2VcIlxyXG4pO1xyXG5jb25zdCBhZGROZXdDYXJkQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19hZGQtYnV0dG9uXCIpO1xyXG4vL2F2YXRhciBlZGl0XHJcbmNvbnN0IGF2YXRhckVkaXRTZWxlY3RvciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9faW1hZ2VcIik7XHJcbmNvbnN0IHByb2ZpbGVUaXRsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fdGl0bGVcIik7XHJcbmNvbnN0IHByb2ZpbGVEZXNjcmlwdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fZGVzY3JpcHRpb25cIik7XHJcbmNvbnN0IHByb2ZpbGVUaXRsZUlucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLXRpdGxlLWlucHV0XCIpO1xyXG5jb25zdCBwcm9maWxlRGVzY3JpcHRpb25JbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgXCIjcHJvZmlsZS1kZXNjcmlwdGlvbi1pbnB1dFwiXHJcbik7XHJcbmNvbnN0IHByZXZpZXdJbWFnZUZvb3RlciA9IHByZXZpZXdJbWFnZU1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Zvb3RlclwiKTtcclxuY29uc3QgZWRpdEF2YXRhckZvcm0gPSBlZGl0QXZhdGFyTW9kYWwucXVlcnlTZWxlY3RvcihcIiNlZGl0LWF2YXRhci1mb3JtXCIpO1xyXG5jb25zdCBwcm9maWxlRWRpdEZvcm0gPSBwcm9maWxlRWRpdE1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIjZWRpdC1wcm9maWxlLWZvcm1cIik7XHJcbmNvbnN0IGFkZENhcmRGb3JtID0gYWRkQ2FyZE1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIjYWRkLWNhcmQtZm9ybVwiKTtcclxuY29uc3QgY2FyZFRlbXBsYXRlID1cclxuICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2NhcmQtdGVtcGxhdGVcIikuY29udGVudC5maXJzdEVsZW1lbnRDaGlsZDtcclxuY29uc3QgY2FyZExpc3RFbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZ2FsbGVyeV9fbGlzdFwiKTtcclxuXHJcbmNvbnN0IGNhcmRUaXRsZUlucHV0ID0gYWRkQ2FyZEZvcm0ucXVlcnlTZWxlY3RvcihcIiNtb2RhbF9faW5wdXRfdHlwZV90aXRsZVwiKTtcclxuY29uc3QgY2FyZFVSTElucHV0ID0gYWRkQ2FyZEZvcm0ucXVlcnlTZWxlY3RvcihcIiNtb2RhbF9faW5wdXRfdHlwZV91cmxcIik7XHJcblxyXG4vKiBWQUxJREFUSU9OXHJcbiAqL1xyXG5jb25zdCB2YWxpZGF0aW9uU2V0dGluZ3MgPSB7XHJcbiAgaW5wdXRTZWxlY3RvcjogXCIubW9kYWxfX2lucHV0XCIsXHJcbiAgc3VibWl0QnV0dG9uU2VsZWN0b3I6IFwiLm1vZGFsX19idXR0b25cIixcclxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiBcIm1vZGFsX19idXR0b25fZGlzYWJsZWRcIixcclxuICBpbnB1dEVycm9yQ2xhc3M6IFwiLm1vZGFsX19pbnB1dF90eXBlX2Vycm9yXCIsXHJcbiAgZXJyb3JDbGFzczogXCIubW9kYWxfX2Vycm9yXCIsXHJcbn07XHJcblxyXG5leHBvcnQge1xyXG4gIGluaXRpYWxDYXJkcyxcclxuICBwcm9maWxlRWRpdEJ1dHRvbixcclxuICBwcm9maWxlRWRpdE1vZGFsLFxyXG4gIHByZXZpZXdJbWFnZU1vZGFsLFxyXG4gIHBvcHVwQ29uZmlybU1vZGFsLFxyXG4gIGFkZENhcmRNb2RhbCxcclxuICBlZGl0QXZhdGFyTW9kYWwsXHJcbiAgYXZhdGFyRWRpdFNlbGVjdG9yLFxyXG4gIHByb2ZpbGVNb2RhbENsb3NlQnV0dG9uLFxyXG4gIGFkZENhcmRNb2RhbENsb3NlQnV0dG9uLFxyXG4gIHByZXZpZXdJbWFnZUNsb3NlQnV0dG9uLFxyXG4gIGFkZE5ld0NhcmRCdXR0b24sXHJcbiAgcHJvZmlsZVRpdGxlLFxyXG4gIHByb2ZpbGVEZXNjcmlwdGlvbixcclxuICBwcm9maWxlVGl0bGVJbnB1dCxcclxuICBwcm9maWxlRGVzY3JpcHRpb25JbnB1dCxcclxuICBwcmV2aWV3SW1hZ2VGb290ZXIsXHJcbiAgcHJvZmlsZUVkaXRGb3JtLFxyXG4gIGFkZENhcmRGb3JtLFxyXG4gIGVkaXRBdmF0YXJGb3JtLFxyXG4gIGNhcmRUZW1wbGF0ZSxcclxuICBjYXJkTGlzdEVsLFxyXG4gIGNhcmRUaXRsZUlucHV0LFxyXG4gIGNhcmRVUkxJbnB1dCxcclxuICB2YWxpZGF0aW9uU2V0dGluZ3MsXHJcbn07XHJcbiIsImltcG9ydCBDYXJkIGZyb20gXCIuLi9jb21wb25lbnRzL0NhcmQuanNcIjtcbmltcG9ydCBGb3JtVmFsaWRhdG9yIGZyb20gXCIuLi9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanNcIjtcbmltcG9ydCBcIi4uL3BhZ2VzL2luZGV4LmNzc1wiO1xuaW1wb3J0IFVzZXJJbmZvIGZyb20gXCIuLi9jb21wb25lbnRzL1VzZXJJbmZvLmpzXCI7XG5pbXBvcnQgU2VjdGlvbiBmcm9tIFwiLi4vY29tcG9uZW50cy9TZWN0aW9uLmpzXCI7XG5pbXBvcnQgSW1hZ2VQb3B1cCBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qc1wiO1xuaW1wb3J0IFBvcHVwQ29uZmlybSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cENvbmZpcm0uanNcIjtcbmltcG9ydCBGb3JtUG9wdXAgZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qc1wiO1xuaW1wb3J0IHtcbiAgaW5pdGlhbENhcmRzLFxuICBwcm9maWxlRWRpdEJ1dHRvbixcbiAgcHJvZmlsZUVkaXRNb2RhbCxcbiAgcHJldmlld0ltYWdlTW9kYWwsXG4gIGFkZENhcmRNb2RhbCxcbiAgZWRpdEF2YXRhck1vZGFsLFxuICBwb3B1cENvbmZpcm1Nb2RhbCxcbiAgcHJvZmlsZU1vZGFsQ2xvc2VCdXR0b24sXG4gIGFkZENhcmRNb2RhbENsb3NlQnV0dG9uLFxuICBwcmV2aWV3SW1hZ2VDbG9zZUJ1dHRvbixcbiAgYWRkTmV3Q2FyZEJ1dHRvbixcbiAgYXZhdGFyRWRpdFNlbGVjdG9yLFxuICBwcm9maWxlVGl0bGUsXG4gIHByb2ZpbGVEZXNjcmlwdGlvbixcbiAgcHJvZmlsZVRpdGxlSW5wdXQsXG4gIHByb2ZpbGVEZXNjcmlwdGlvbklucHV0LFxuICBwcmV2aWV3SW1hZ2VGb290ZXIsXG4gIHByb2ZpbGVFZGl0Rm9ybSxcbiAgYWRkQ2FyZEZvcm0sXG4gIGVkaXRBdmF0YXJGb3JtLFxuICBjYXJkVGVtcGxhdGUsXG4gIGNhcmRMaXN0RWwsXG4gIGNhcmRUaXRsZUlucHV0LFxuICBjYXJkVVJMSW5wdXQsXG4gIHZhbGlkYXRpb25TZXR0aW5ncyxcbn0gZnJvbSBcIi4uL3V0aWxzL2NvbnN0YW50cy5qc1wiO1xuaW1wb3J0IEFwaSBmcm9tIFwiLi4vY29tcG9uZW50cy9BcGkuanNcIjtcblxuY29uc3QgYXBpID0gbmV3IEFwaSh7XG4gIGJhc2VVcmw6IFwiaHR0cHM6Ly9hcm91bmQtYXBpLmVuLnRyaXBsZXRlbi1zZXJ2aWNlcy5jb20vdjFcIixcbiAgaGVhZGVyczoge1xuICAgIGF1dGhvcml6YXRpb246IFwiNThhN2M3MzUtYWM0NC00OWFmLWFlZWItZTc0NmRhY2Q0Yjc3XCIsXG4gICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gIH0sXG59KTtcblxuY29uc3QgcG9wdXBDb25maXJtID0gbmV3IFBvcHVwQ29uZmlybShwb3B1cENvbmZpcm1Nb2RhbCk7XG5wb3B1cENvbmZpcm0uc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuY29uc3QgdXNlciA9IG5ldyBVc2VySW5mbyhwcm9maWxlVGl0bGUsIHByb2ZpbGVEZXNjcmlwdGlvbiwgYXZhdGFyRWRpdFNlbGVjdG9yKTtcbmNvbnNvbGUubG9nKHVzZXIpO1xuXG5jb25zdCByZW5kZXJDYXJkID0gKGNhcmREYXRhKSA9PiB7XG4gIGNvbnN0IGNhcmQgPSBuZXcgQ2FyZChcbiAgICB7XG4gICAgICBjYXJkRGF0YSxcbiAgICAgIHVzZXJJZDogdXNlcklkLFxuICAgICAgaGFuZGxlQ2FyZENsaWNrOiAoaW1hZ2VEYXRhKSA9PiB7XG4gICAgICAgIHByZXZpZXdJbWFnZS5vcGVuKGltYWdlRGF0YSk7XG4gICAgICB9LFxuICAgICAgaGFuZGxlRGVsZXRlQ2xpY2ssXG4gICAgICBoYW5kbGVMaWtlQ2xpY2ssXG4gICAgfSxcbiAgICBjYXJkVGVtcGxhdGVcbiAgKTtcbiAgY2FyZFNlY3Rpb24uYWRkSXRlbShjYXJkLmdldENhcmRWaWV3KCkpO1xufTtcblxuZnVuY3Rpb24gaGFuZGxlRGVsZXRlQ2xpY2soaXRlbSkge1xuICBwb3B1cENvbmZpcm0ub3BlbigpO1xuICBwb3B1cENvbmZpcm0uc2V0U3VibWl0QWN0aW9uKCgpID0+IHtcbiAgICBhcGlcbiAgICAgIC5kZWxldGVDYXJkKGl0ZW0uZ2V0SWQoKSlcbiAgICAgIC50aGVuKCgpID0+IHtcbiAgICAgICAgaXRlbS5yZW1vdmVDYXJkKCk7XG4gICAgICAgIHBvcHVwQ29uZmlybS5jbG9zZSgpO1xuICAgICAgfSlcbiAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcbiAgICAgIH0pO1xuICB9KTtcbn1cblxuZnVuY3Rpb24gaGFuZGxlTGlrZUNsaWNrKGNhcmQpIHtcbiAgaWYgKCFjYXJkLl9pc0xpa2VkKSB7XG4gICAgYXBpXG4gICAgICAuYWRkQ2FyZExpa2UoY2FyZC5faWQpXG4gICAgICAudGhlbigoKSA9PiB7XG4gICAgICAgIGNhcmQudXBkYXRlTGlrZVN0YXR1cyh0cnVlKTtcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICBjb25zb2xlLmVycm9yKGVycik7XG4gICAgICB9KTtcbiAgfSBlbHNlIHtcbiAgICBhcGlcbiAgICAgIC5yZW1vdmVDYXJkTGlrZShjYXJkLl9pZClcbiAgICAgIC50aGVuKCgpID0+IHtcbiAgICAgICAgY2FyZC51cGRhdGVMaWtlU3RhdHVzKGZhbHNlKTtcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICBjb25zb2xlLmVycm9yKGVycik7XG4gICAgICB9KTtcbiAgfVxufVxuXG5jb25zdCBjYXJkU2VjdGlvbiA9IG5ldyBTZWN0aW9uKFxuICB7XG4gICAgcmVuZGVyZXI6IHJlbmRlckNhcmQsXG4gIH0sXG4gIGNhcmRMaXN0RWxcbik7XG5cbmxldCB1c2VySWQgPSBcIlwiO1xuXG4vLyBMb2FkaW5nIGluaXRpYWwgc2VjdGlvblxuXG5hcGkuZ2V0QXBwSW5mbygpLnRoZW4oKFtjYXJkcywgdXNlckRhdGFdKSA9PiB7XG4gIHVzZXJJZCA9IHVzZXJEYXRhLl9pZDtcbiAgY2FyZFNlY3Rpb24ucmVuZGVySXRlbXMoY2FyZHMpLCB1c2VyLnNldFVzZXJJbmZvKHVzZXJEYXRhKTtcbiAgY29uc29sZS5sb2codXNlckRhdGEpO1xufSk7XG5cbmNvbnNvbGUubG9nKGF2YXRhckVkaXRTZWxlY3Rvcik7XG5cbmNvbnN0IGVkaXRGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoXG4gIHZhbGlkYXRpb25TZXR0aW5ncyxcbiAgcHJvZmlsZUVkaXRGb3JtXG4pO1xuXG5jb25zdCBhdmF0YXJGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoXG4gIHZhbGlkYXRpb25TZXR0aW5ncyxcbiAgZWRpdEF2YXRhckZvcm1cbik7XG5cbmNvbnN0IGFkZENhcmRWYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcih2YWxpZGF0aW9uU2V0dGluZ3MsIGFkZENhcmRGb3JtKTtcbmVkaXRGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcbmFkZENhcmRWYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xuYXZhdGFyRm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XG5cbmNvbnNvbGUubG9nKHByb2ZpbGVFZGl0TW9kYWwpO1xuLy9jb25zdCBlZGl0Rm9ybVBvcHVwID0gbmV3IEZvcm1Qb3B1cChwcm9maWxlRWRpdE1vZGFsLCBoYW5kbGVQcm9maWxlRWRpdFN1Ym1pdCk7XG5cbmNvbnN0IGFkZENhcmRGb3JtUG9wdXAgPSBuZXcgRm9ybVBvcHVwKGFkZENhcmRNb2RhbCwgKHZhbHVlcykgPT4ge1xuICBhcGlcbiAgICAuYWRkTmV3Q2FyZCh2YWx1ZXMpXG4gICAgLnRoZW4oKGRhdGEpID0+IHtcbiAgICAgIHJlbmRlckNhcmQoZGF0YSk7XG4gICAgICBhZGRDYXJkRm9ybVBvcHVwLmNsb3NlKCk7XG4gICAgfSlcbiAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgY29uc29sZS5sb2coZXJyKTtcbiAgICB9KTtcbn0pO1xuXG5jb25zdCBlZGl0Rm9ybVBvcHVwID0gbmV3IEZvcm1Qb3B1cChwcm9maWxlRWRpdE1vZGFsLCAodmFsdWVzKSA9PiB7XG4gIGNvbnNvbGUubG9nKHZhbHVlcyk7XG4gIGFwaVxuICAgIC5wYXRjaFByb2ZpbGVEYXRhKHZhbHVlcylcbiAgICAudGhlbigoZGF0YSkgPT4ge1xuICAgICAgdXNlci5zZXRVc2VySW5mbyhkYXRhKTtcbiAgICAgIGVkaXRGb3JtUG9wdXAuY2xvc2UoKTtcbiAgICB9KVxuICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICBjb25zb2xlLmxvZyhlcnIpO1xuICAgIH0pO1xufSk7XG5jb25zb2xlLmxvZyhwb3B1cENvbmZpcm1Nb2RhbCk7XG5cbmNvbnN0IGF2YXRhckVkaXRQb3B1cCA9IG5ldyBGb3JtUG9wdXAoZWRpdEF2YXRhck1vZGFsLCAodmFsdWVzKSA9PiB7XG4gIGFwaVxuICAgIC5wYXRjaFByb2ZpbGVJbWFnZSh2YWx1ZXMubGluaylcbiAgICAudGhlbigoZGF0YSkgPT4ge1xuICAgICAgY29uc29sZS5sb2coZGF0YS5hdmF0YXIpO1xuICAgICAgdXNlci5zZXRBdmF0YXIoZGF0YS5hdmF0YXIpO1xuICAgICAgYXZhdGFyRWRpdFBvcHVwLmNsb3NlKCk7XG4gICAgfSlcbiAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgY29uc29sZS5sb2coZXJyKTtcbiAgICB9KTtcbn0pO1xuXG5lZGl0Rm9ybVBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XG4vL2NvbnN0IGFkZENhcmRGb3JtUG9wdXAgPSBuZXcgRm9ybVBvcHVwKGFkZENhcmRNb2RhbCwgaGFuZGxlQWRkQ2FyZEZvcm1TdWJtaXQpO1xuYWRkQ2FyZEZvcm1Qb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xuYXZhdGFyRWRpdFBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbmNvbnN0IHByZXZpZXdJbWFnZSA9IG5ldyBJbWFnZVBvcHVwKHByZXZpZXdJbWFnZU1vZGFsKTtcbnByZXZpZXdJbWFnZS5zZXRFdmVudExpc3RlbmVycygpO1xuXG4vKiAgIEVWRU5UIEhBTkRMRVJTXG4gKi9cblxuLy9hdmF0YXIgZWRpdFxuYXZhdGFyRWRpdFNlbGVjdG9yLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gIGF2YXRhckVkaXRQb3B1cC5vcGVuKCk7XG59KTtcblxucHJvZmlsZUVkaXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgY29uc3QgeyBwcm9maWxlVGl0bGUsIHByb2ZpbGVEZXNjcmlwdGlvbiB9ID0gdXNlci5nZXRVc2VySW5mbygpO1xuICBwcm9maWxlVGl0bGVJbnB1dC52YWx1ZSA9IHByb2ZpbGVUaXRsZTtcbiAgcHJvZmlsZURlc2NyaXB0aW9uSW5wdXQudmFsdWUgPSBwcm9maWxlRGVzY3JpcHRpb247XG4gIGVkaXRGb3JtUG9wdXAub3BlbigpO1xuICAvL3Nob3VsZCBJIGhhdmUgYSB2YWxpZGF0b3IgaGVyZT8/Pz8/XG59KTtcblxuYWRkTmV3Q2FyZEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICBhZGRDYXJkRm9ybVBvcHVwLm9wZW4oKTtcbiAgYWRkQ2FyZFZhbGlkYXRvci50b2dnbGVCdXR0b25TdGF0ZSgpO1xufSk7XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBBcGkge1xyXG4gIGNvbnN0cnVjdG9yKHsgYmFzZVVybCwgaGVhZGVycyB9KSB7XHJcbiAgICB0aGlzLl9iYXNlVXJsID0gYmFzZVVybDtcclxuICAgIHRoaXMuX2hlYWRlcnMgPSBoZWFkZXJzO1xyXG4gIH1cclxuXHJcbiAgX2NoZWNrUmVzcG9uc2UocmVzKSB7XHJcbiAgICBpZiAocmVzLm9rKSB7XHJcbiAgICAgIGNvbnNvbGUubG9nKHJlcyk7XHJcbiAgICAgIHJldHVybiByZXMuanNvbigpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBFcnJvciAke3Jlcy5zdGF0dXN9YCk7XHJcbiAgfVxyXG5cclxuICBnZXRVc2VySW5mbygpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZWAsIHtcclxuICAgICAgbWV0aG9kOiBcIkdFVFwiLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgfSkudGhlbih0aGlzLl9jaGVja1Jlc3BvbnNlKTtcclxuICB9XHJcblxyXG4gIGdldEluaXRpYWxDYXJkcygpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkc2AsIHtcclxuICAgICAgbWV0aG9kOiBcIkdFVFwiLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgfSkudGhlbih0aGlzLl9jaGVja1Jlc3BvbnNlKTtcclxuICB9XHJcblxyXG4gIGdldEFwcEluZm8oKSB7XHJcbiAgICByZXR1cm4gUHJvbWlzZS5hbGwoW3RoaXMuZ2V0SW5pdGlhbENhcmRzKCksIHRoaXMuZ2V0VXNlckluZm8oKV0pO1xyXG4gIH1cclxuXHJcbiAgcGF0Y2hQcm9maWxlRGF0YSh7IG5hbWUsIGRlc2NyaXB0aW9uIH0pIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZWAsIHtcclxuICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICBuYW1lOiBuYW1lLFxyXG4gICAgICAgIGFib3V0OiBkZXNjcmlwdGlvbixcclxuICAgICAgfSksXHJcbiAgICB9KS50aGVuKHRoaXMuX2NoZWNrUmVzcG9uc2UpO1xyXG4gIH1cclxuXHJcbiAgYWRkTmV3Q2FyZCh7IG5hbWUsIGxpbmsgfSkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzYCwge1xyXG4gICAgICBtZXRob2Q6IFwiUE9TVFwiLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgbmFtZSxcclxuICAgICAgICBsaW5rLFxyXG4gICAgICB9KSxcclxuICAgIH0pLnRoZW4odGhpcy5fY2hlY2tSZXNwb25zZSk7XHJcbiAgfVxyXG5cclxuICBkZWxldGVDYXJkKGNhcmRJZCkge1xyXG4gICAgY29uc29sZS5sb2coXCJoZWxwMlwiKTtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkcy8ke2NhcmRJZH1gLCB7XHJcbiAgICAgIG1ldGhvZDogXCJERUxFVEVcIixcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgIH0pLnRoZW4odGhpcy5fY2hlY2tSZXNwb25zZSk7XHJcbiAgfVxyXG5cclxuICBhZGRDYXJkTGlrZShjYXJkSWQpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkcy8ke2NhcmRJZH0vbGlrZXNgLCB7XHJcbiAgICAgIG1ldGhvZDogXCJQVVRcIixcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgIH0pLnRoZW4odGhpcy5fY2hlY2tSZXNwb25zZSk7XHJcbiAgfVxyXG5cclxuICByZW1vdmVDYXJkTGlrZShjYXJkSWQpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkcy8ke2NhcmRJZH0vbGlrZXNgLCB7XHJcbiAgICAgIG1ldGhvZDogXCJERUxFVEVcIixcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgIH0pLnRoZW4odGhpcy5fY2hlY2tSZXNwb25zZSk7XHJcbiAgfVxyXG5cclxuICBwYXRjaFByb2ZpbGVJbWFnZShhdmF0YXIpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZS9hdmF0YXJgLCB7XHJcbiAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgYXZhdGFyLFxyXG4gICAgICB9KSxcclxuICAgIH0pLnRoZW4odGhpcy5fY2hlY2tSZXNwb25zZSk7XHJcbiAgfVxyXG4gIC8vIG90aGVyIG1ldGhvZHMgZm9yIHdvcmtpbmcgd2l0aCB0aGUgQVBJXHJcbn1cclxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cENvbmZpcm0gZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xyXG4gICAgc3VwZXIoeyBwb3B1cFNlbGVjdG9yIH0pO1xyXG4gICAgdGhpcy5fcG9wdXBGb3JtID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcG9wdXAtY29uZmlybS1mb3JtXCIpO1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2J1dHRvblwiKTtcclxuICB9XHJcblxyXG4gIHNldFN1Ym1pdEFjdGlvbihhY3Rpb24pIHtcclxuICAgIGNvbnNvbGUubG9nKFwiaGVscHNlcjRcIik7XHJcbiAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0ID0gYWN0aW9uO1xyXG4gIH1cclxuXHJcbiAgX2hhbmRsZVN1Ym1pdCA9IChldnQpID0+IHtcclxuICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCgpO1xyXG4gIH07XHJcblxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgY29uc29sZS5sb2coXCJoZWxwZXI1XCIpO1xyXG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgIHRoaXMuX3BvcHVwRm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChldmVudCkgPT4ge1xyXG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICBjb25zb2xlLmxvZyhcImhlbHBlcjdcIik7XHJcblxyXG4gICAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0KCk7XHJcbiAgICB9KTtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgVXNlckluZm8ge1xyXG4gIGNvbnN0cnVjdG9yKHByb2ZpbGVUaXRsZSwgcHJvZmlsZURlc2NyaXB0aW9uLCBwcm9maWxlSW1hZ2UpIHtcclxuICAgIHRoaXMuX3Byb2ZpbGVUaXRsZSA9IHByb2ZpbGVUaXRsZTtcclxuICAgIHRoaXMuX3Byb2ZpbGVEZXNjcmlwdGlvbiA9IHByb2ZpbGVEZXNjcmlwdGlvbjtcclxuICAgIHRoaXMuX3Byb2ZpbGVJbWFnZSA9IHByb2ZpbGVJbWFnZTtcclxuICAgIGNvbnNvbGUubG9nKHRoaXMuX3Byb2ZpbGVJbWFnZSk7XHJcbiAgfVxyXG5cclxuICBnZXRVc2VySW5mbygpIHtcclxuICAgIGNvbnN0IGluZm8gPSB7fTtcclxuICAgIGNvbnNvbGUubG9nKHRoaXMuX3Byb2ZpbGVUaXRsZSk7XHJcbiAgICBpbmZvLnByb2ZpbGVUaXRsZSA9IHRoaXMuX3Byb2ZpbGVUaXRsZS50ZXh0Q29udGVudDtcclxuICAgIGluZm8ucHJvZmlsZURlc2NyaXB0aW9uID0gdGhpcy5fcHJvZmlsZURlc2NyaXB0aW9uLnRleHRDb250ZW50O1xyXG4gICAgcmV0dXJuIGluZm87XHJcbiAgfVxyXG5cclxuICBzZXRVc2VySW5mbyhkYXRhKSB7XHJcbiAgICB0aGlzLl9wcm9maWxlVGl0bGUudGV4dENvbnRlbnQgPSBkYXRhLm5hbWU7XHJcbiAgICB0aGlzLl9wcm9maWxlRGVzY3JpcHRpb24udGV4dENvbnRlbnQgPSBkYXRhLmFib3V0O1xyXG4gIH1cclxuXHJcbiAgc2V0QXZhdGFyKG5ld0F2YXRhcikge1xyXG4gICAgY29uc29sZS5sb2cobmV3QXZhdGFyKTtcclxuICAgIHRoaXMuX3Byb2ZpbGVJbWFnZS5zcmMgPSBuZXdBdmF0YXI7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFNlY3Rpb24ge1xyXG4gIGNvbnN0cnVjdG9yKHtyZW5kZXJlciB9LCBjb250YWluZXIpIHtcclxuICAgIHRoaXMuX2NvbnRhaW5lciA9IGNvbnRhaW5lcjtcclxuICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7XHJcbiAgfVxyXG5cclxuICByZW5kZXJJdGVtcyhpdGVtcykge1xyXG4gICAgaXRlbXMuZm9yRWFjaCgoaXRlbSkgPT4ge1xyXG4gICAgICB0aGlzLl9yZW5kZXJlcihpdGVtKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgYWRkSXRlbShpdGVtKSB7XHJcbiAgICB0aGlzLl9jb250YWluZXIucHJlcGVuZChpdGVtKTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XHJcbiAgICBzdXBlcih7IHBvcHVwU2VsZWN0b3IgfSk7XHJcbiAgICB0aGlzLl9wcmV2aWV3SW1hZ2UgPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9faW1hZ2VcIik7XHJcbiAgICBjb25zb2xlLmxvZyh0aGlzLl9wcmV2aWV3SW1hZ2UpO1xyXG4gICAgdGhpcy5fcHJldmlld0NhcHRpb24gPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fZm9vdGVyXCIpO1xyXG4gIH1cclxuXHJcbiAgb3BlbihkYXRhKSB7XHJcbiAgICBjb25zdCB7IGxpbmssIG5hbWUgfSA9IGRhdGE7XHJcbiAgICB0aGlzLl9wcmV2aWV3SW1hZ2Uuc3JjID0gbGluaztcclxuICAgIHRoaXMuX3ByZXZpZXdJbWFnZS5hbHQgPSBuYW1lO1xyXG4gICAgdGhpcy5fcHJldmlld0NhcHRpb24udGV4dENvbnRlbnQgPSBuYW1lO1xyXG4gICAgc3VwZXIub3BlbigpO1xyXG4gIH1cclxuXHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xyXG4gIH1cclxufVxyXG4iXSwibmFtZXMiOlsiQ2FyZCIsImNvbnN0cnVjdG9yIiwiX3JlZiIsImNhcmRTZWxlY3RvciIsImNhcmREYXRhIiwidXNlcklkIiwiaGFuZGxlQ2FyZENsaWNrIiwiaGFuZGxlRGVsZXRlQ2xpY2siLCJoYW5kbGVMaWtlQ2xpY2siLCJ0aGlzIiwiX25hbWUiLCJuYW1lIiwiX2xpbmsiLCJsaW5rIiwiX2lkIiwiX2xpa2VzIiwiX2lzTGlrZWQiLCJpc0xpa2VkIiwiX3VzZXJJZCIsIl91c2VyQ2FyZElkIiwiX2NhcmRTZWxlY3RvciIsIl9oYW5kbGVDYXJkQ2xpY2siLCJfaGFuZGxlRGVsZXRlQ2xpY2siLCJfaGFuZGxlTGlrZUNsaWNrIiwiX2dldFRlbXBsYXRlIiwiY2xvbmVOb2RlIiwiX3JlbmRlckxpa2VzIiwiX2ltYWdlTGlrZSIsImNsYXNzTGlzdCIsImFkZCIsImNvbnNvbGUiLCJsb2ciLCJyZW1vdmUiLCJnZXRDYXJkVmlldyIsIl9lbGVtZW50IiwiX3NldEV2ZW50TGlzdGVuZXJzQ2FyZCIsImltYWdlRWxlbWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJpbWFnZVRpdGxlIiwic3JjIiwiYWx0IiwidGV4dENvbnRlbnQiLCJ1cGRhdGVMaWtlU3RhdHVzIiwiYWRkRXZlbnRMaXN0ZW5lciIsImdldElkIiwicmVtb3ZlQ2FyZCIsIkZvcm1WYWxpZGF0b3IiLCJzZXR0aW5ncyIsImZvcm1FbGVtZW50IiwiX2lucHV0U2VsZWN0b3IiLCJpbnB1dFNlbGVjdG9yIiwiX3N1Ym1pdEJ1dHRvblNlbGVjdG9yIiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJfaW5hY3RpdmVCdXR0b25DbGFzcyIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJfaW5wdXRFcnJvckNsYXNzIiwiaW5wdXRFcnJvckNsYXNzIiwiX2Vycm9yQ2xhc3MiLCJlcnJvckNsYXNzIiwiX2Zvcm0iLCJfaGFzSW52YWxpZElucHV0IiwiX2lucHV0RWxzIiwiZXZlcnkiLCJpbnB1dEVsIiwidmFsaWRpdHkiLCJ2YWxpZCIsIl9jaGVja0lucHV0VmFsaWRpdHkiLCJfaGlkZUlucHV0RXJyb3IiLCJfc2hvd0lucHV0RXJyb3IiLCJlcnJvck1lc3NhZ2VFbCIsImlkIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJ0b2dnbGVCdXR0b25TdGF0ZSIsIl9zdWJtaXRCdXR0b24iLCJkaXNhYmxlZCIsIl9zZXRFdmVudExpc3RlbmVycyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJmb3JFYWNoIiwiZW5hYmxlVmFsaWRhdGlvbiIsImV2dCIsInByZXZlbnREZWZhdWx0IiwiUG9wdXAiLCJwb3B1cFNlbGVjdG9yIiwiX3BvcHVwRWxlbWVudCIsIl9oYW5kbGVFc2NDbG9zZSIsImJpbmQiLCJvcGVuIiwiZG9jdW1lbnQiLCJjbG9zZSIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJrZXkiLCJzZXRFdmVudExpc3RlbmVycyIsInRhcmdldCIsImN1cnJlbnRUYXJnZXQiLCJjb250YWlucyIsIlBvcHVwV2l0aEZvcm0iLCJoYW5kbGVGb3JtU3VibWl0Iiwic3VwZXIiLCJfcG9wdXBGb3JtIiwiX2Zvcm1JbnB1dHMiLCJfaGFuZGxlRm9ybVN1Ym1pdCIsIl9nZXRJbnB1dFZhbHVlcyIsInZhbHVlcyIsImlucHV0IiwidmFsdWUiLCJfc3VibWl0Rm9ybSIsImUiLCJyZXNldCIsInByb2ZpbGVFZGl0QnV0dG9uIiwicHJvZmlsZUVkaXRNb2RhbCIsInByZXZpZXdJbWFnZU1vZGFsIiwiYWRkQ2FyZE1vZGFsIiwiZWRpdEF2YXRhck1vZGFsIiwicG9wdXBDb25maXJtTW9kYWwiLCJhZGROZXdDYXJkQnV0dG9uIiwiYXZhdGFyRWRpdFNlbGVjdG9yIiwicHJvZmlsZVRpdGxlIiwicHJvZmlsZURlc2NyaXB0aW9uIiwicHJvZmlsZVRpdGxlSW5wdXQiLCJwcm9maWxlRGVzY3JpcHRpb25JbnB1dCIsImVkaXRBdmF0YXJGb3JtIiwicHJvZmlsZUVkaXRGb3JtIiwiYWRkQ2FyZEZvcm0iLCJjYXJkVGVtcGxhdGUiLCJjb250ZW50IiwiZmlyc3RFbGVtZW50Q2hpbGQiLCJjYXJkTGlzdEVsIiwidmFsaWRhdGlvblNldHRpbmdzIiwiYXBpIiwiYmFzZVVybCIsImhlYWRlcnMiLCJfYmFzZVVybCIsIl9oZWFkZXJzIiwiX2NoZWNrUmVzcG9uc2UiLCJyZXMiLCJvayIsImpzb24iLCJQcm9taXNlIiwicmVqZWN0Iiwic3RhdHVzIiwiZ2V0VXNlckluZm8iLCJmZXRjaCIsIm1ldGhvZCIsInRoZW4iLCJnZXRJbml0aWFsQ2FyZHMiLCJnZXRBcHBJbmZvIiwiYWxsIiwicGF0Y2hQcm9maWxlRGF0YSIsIl9yZWYyIiwiZGVzY3JpcHRpb24iLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsImFib3V0IiwiYWRkTmV3Q2FyZCIsIl9yZWYzIiwiZGVsZXRlQ2FyZCIsImNhcmRJZCIsImFkZENhcmRMaWtlIiwicmVtb3ZlQ2FyZExpa2UiLCJwYXRjaFByb2ZpbGVJbWFnZSIsImF2YXRhciIsImF1dGhvcml6YXRpb24iLCJwb3B1cENvbmZpcm0iLCJzZXRTdWJtaXRBY3Rpb24iLCJhY3Rpb24iLCJfaGFuZGxlU3VibWl0IiwiZXZlbnQiLCJ1c2VyIiwicHJvZmlsZUltYWdlIiwiX3Byb2ZpbGVUaXRsZSIsIl9wcm9maWxlRGVzY3JpcHRpb24iLCJfcHJvZmlsZUltYWdlIiwiaW5mbyIsInNldFVzZXJJbmZvIiwiZGF0YSIsInNldEF2YXRhciIsIm5ld0F2YXRhciIsInJlbmRlckNhcmQiLCJjYXJkIiwiaW1hZ2VEYXRhIiwicHJldmlld0ltYWdlIiwiY2FyZFNlY3Rpb24iLCJhZGRJdGVtIiwiaXRlbSIsImNhdGNoIiwiZXJyIiwiZXJyb3IiLCJjb250YWluZXIiLCJyZW5kZXJlciIsIl9jb250YWluZXIiLCJfcmVuZGVyZXIiLCJyZW5kZXJJdGVtcyIsIml0ZW1zIiwicHJlcGVuZCIsImNhcmRzIiwidXNlckRhdGEiLCJlZGl0Rm9ybVZhbGlkYXRvciIsImF2YXRhckZvcm1WYWxpZGF0b3IiLCJhZGRDYXJkVmFsaWRhdG9yIiwiYWRkQ2FyZEZvcm1Qb3B1cCIsIkZvcm1Qb3B1cCIsImVkaXRGb3JtUG9wdXAiLCJhdmF0YXJFZGl0UG9wdXAiLCJfcHJldmlld0ltYWdlIiwiX3ByZXZpZXdDYXB0aW9uIl0sInNvdXJjZVJvb3QiOiIifQ==